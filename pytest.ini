[pytest]
addopts = --alluredir=reports/allure-results --junitxml=reports/junit.xml --html=reports/report.html --self-contained-html --tb=short --base-url=https://ts.tun2.ru/ -p no:sugar -p no:print -p no:benchmark -p no:metadata
testpaths = tests
asyncio_default_fixture_loop_scope = function

# Logging configuration
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S
log_file = reports/pytest.log
log_file_level = INFO
log_file_format = %(asctime)s [%(levelname)s] %(name)s: %(message)s
log_file_date_format = %Y-%m-%d %H:%M:%S

# Visual snapshot configuration (pytest-playwright-visual-snapshot)
playwright_visual_snapshots_path = references
playwright_visual_snapshot_failures_path = snapshot_failures
playwright_visual_ignore_size_diff = true

markers =
    # Check authentication flow
    authorization: Tests that validate authorization flow

    upload: Tests that validate upload flow

    pixel: mark test as pixel/visual regression test
    pixel_test: mark test as pixel test (visual regression test)

    # Fast scope of critical functionality
    smoke: mark test as smoke test (critical functionality)

    # Regression tests functionality
    regression: mark test as regression test (functional changes)

    # Validation all tests scope
    validation: mark test as validation test (data validation)


    # Device-specific tests
    mobile: mark test as mobile test
    web: mark test as web test (desktop)
    tablet: mark test as tablet test (tablet)
